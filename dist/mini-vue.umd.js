(function(s,f){typeof exports=="object"&&typeof module!="undefined"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(s=typeof globalThis!="undefined"?globalThis:s||self,f(s.MiniVue={}))})(this,function(s){"use strict";function f(e,t){e.props=t||{}}const h=Object.assign,p=e=>typeof e=="object"&&e!==null,S=e=>{throw new Error(e)},g=e=>/^on[A-Z]/.test(e),_=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),H=e=>e.charAt(0).toUpperCase()+e.slice(1),v=e=>e.split("-").map(t=>H(t)).join(""),w=e=>e?`on${v(e)}`:"",M={$el:e=>e.vnode.el,$slots:e=>e.slots},P={get({_:e},t){const{setupState:n,props:o}=e;if(_(n,t))return n[t];if(_(o,t))return o[t];const r=M[t];if(r)return r(e)}};function j(e,t,...n){const{props:o}=e,r=w(t),c=o[r];c&&c(...n)}var i=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e[e.SLOT_CHILDREN=16]="SLOT_CHILDREN",e))(i||{});function D(e,t){e.vnode.shapeFlag&i.SLOT_CHILDREN&&$(t,e.slots)}function $(e,t){if(p(e))for(const n in e){const o=e[n];t[n]=r=>x(o(r))}}function x(e){return Array.isArray(e)?e:[e]}const F=new WeakMap;function U(e,t,n){const o=F.get(e);if(!o)throw new Error(`not found ${e}`);const r=o.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);Y(r)}function Y(e){for(const t of e)t.scheduler?t.scheduler():t.run()}const z=a(),G=R(),X=a(!0),V=R(!0),q=a(!0,!0);function a(e=!1,t=!1){return function(o,r){let c=Reflect.get(o,r);return r===E.IS_REACTIVE?!e:r===E.IS_READONLY?e:(t||p(c)&&(c=e?B(c):Z(c)),c)}}function R(e=!1){return function(n,o,r){if(e)return console.warn(`${o} is readonly, target can not be set, ${n}`),!0;const c=Reflect.set(n,o,r);return U(n,o),c}}const K={get:z,set:G},y={get:X,set:V},W=h({},y,{get:q});var E=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(E||{});function Z(e){return T(e,K)}function B(e){return T(e,y)}function J(e){return T(e,W)}function T(e,t){return p(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}function Q(e,t){const n={vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[],slots:{},provides:t?t.provides:{},parent:t};return n.emit=j.bind(null,n),n}function k(e){f(e,e.vnode.props),D(e,e.vnode.children),ee(e)}function ee(e){const t=e.type,{setup:n}=t;if(n){C(e);const o=n(J(e.props),{emit:e.emit});C(null),te(e,o)}e.proxy=new Proxy({_:e},P)}function te(e,t){typeof t=="object"&&(e.setupState=t),ne(e)}function ne(e){const t=e.type;t.render&&(e.render=t.render)}let L=null;function m(){return L}function C(e){L=e}const A=Symbol("Fragment"),I=Symbol("Text");function l(e,t,n){const o={type:e,props:t,children:n,el:null,shapeFlag:re(e)};return typeof n=="string"?o.shapeFlag|=i.TEXT_CHILDREN:Array.isArray(n)?o.shapeFlag|=i.ARRAY_CHILDREN:o.shapeFlag&i.STATEFUL_COMPONENT&&p(o.children)&&(o.shapeFlag|=i.SLOT_CHILDREN),o}function oe(e){return l(I,{},e)}function re(e){return typeof e=="string"?i.ELEMENT:i.STATEFUL_COMPONENT}function ce(e,t){N(e,t,null)}function N(e,t,n){const{shapeFlag:o,type:r}=e;switch(r){case A:ie(e,t,n);break;case I:se(e,t);break;default:o&i.ELEMENT?ue(e,t,n):o&i.STATEFUL_COMPONENT&&le(e,t,n);break}}function se(e,t){const{children:n}=e,o=e.el=document.createTextNode(n);t.append(o)}function ie(e,t,n){O(e,t,n)}function ue(e,t,n){fe(e,t,n)}function fe(e,t,n){const{children:o,props:r,shapeFlag:c}=e,u=document.createElement(e.type);e.el=u,o&&(c&i.TEXT_CHILDREN?u.textContent=o:c&i.ARRAY_CHILDREN&&O(e,u,n));for(const d in r){const b=r[d];if(g(d)){const _e=d.slice(2).toLowerCase();u.addEventListener(_e,b)}else u.setAttribute(d,b)}t.appendChild(u)}function O(e,t,n){e.children.forEach(o=>{N(o,t,n)})}function le(e,t,n){pe(e,t,n)}function pe(e,t,n){const o=Q(e,n);k(o),de(o,e,t)}function de(e,t,n){var c;const{proxy:o}=e,r=(c=e.render)==null?void 0:c.call(o);r&&N(r,n,e),t.el=r.el}function ae(e){return{mount(t){const n=l(e);let o;typeof t=="string"?o=document.querySelector(t):o=t,t||S(`can not find element ${t} on document`),ce(n,o)}}}function Ee(e,t,n){return l(e,t,n)}function Te(e,t,n){const o=e[t];if(o&&typeof o=="function")return l(A,{},o(n))}function me(e,t){var o;const n=m();if(n){let{provides:r}=n;const c=(o=n.parent)==null?void 0:o.provides;c===r&&(r=n.provides=Object.create(c)),r[e]=t}}function Ne(e,t){var o;const n=m();if(n){const r=(o=n.parent)==null?void 0:o.provides;if(r){if(e in r)return r[e];if(t)return typeof t=="function"?t():t}}}s.createApp=ae,s.createTextNode=oe,s.createVNode=l,s.getCurrentInstance=m,s.h=Ee,s.inject=Ne,s.provide=me,s.renderSlots=Te,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
