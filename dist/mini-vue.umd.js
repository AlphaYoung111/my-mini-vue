var ct=Object.defineProperty;var it=(u,_,m)=>_ in u?ct(u,_,{enumerable:!0,configurable:!0,writable:!0,value:m}):u[_]=m;var E=(u,_,m)=>(it(u,typeof _!="symbol"?_+"":_,m),m);(function(u,_){typeof exports=="object"&&typeof module!="undefined"?_(exports):typeof define=="function"&&define.amd?define(["exports"],_):(u=typeof globalThis!="undefined"?globalThis:u||self,_(u.MiniVue={}))})(this,function(u){"use strict";function _(e,t){e.props=t||{}}const m=Object.assign,R=e=>typeof e=="object"&&e!==null,ee=(e,t)=>!Object.is(e,t),te=e=>{throw new Error(e)},ne=e=>/^on[A-Z]/.test(e),P=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),re=e=>e.charAt(0).toUpperCase()+e.slice(1),oe=e=>e.split("-").map(t=>re(t)).join(""),se=e=>e?`on${oe(e)}`:"",C={},ce={$el:e=>e.vnode.el,$slots:e=>e.slots},ie={get({_:e},t){const{setupState:n,props:r}=e;if(P(n,t))return n[t];if(P(r,t))return r[t];const f=ce[t];if(f)return f(e)}};function ue(e,t,...n){const{props:r}=e,f=se(t),l=r[f];l&&l(...n)}var d=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e[e.SLOT_CHILDREN=16]="SLOT_CHILDREN",e))(d||{});function fe(e,t){e.vnode.shapeFlag&d.SLOT_CHILDREN&&le(t,e.slots)}function le(e,t){if(R(e))for(const n in e){const r=e[n];t[n]=f=>ae(r(f))}}function ae(e){return Array.isArray(e)?e:[e]}let v,b;class D{constructor(t,n){E(this,"_fn");E(this,"deps",[]);E(this,"active",!0);E(this,"onStop");this.scheduler=n,this._fn=t}run(){if(!this.active)return this._fn();v=this,b=!0;const t=this._fn();return b=!1,t}stop(){this.active&&(this.onStop&&this.onStop(),pe(this),this.active=!1)}}function pe(e){e.deps.forEach(t=>{t.delete(e)}),e.deps.length=0}const I=new WeakMap;function H(){return b&&v!==void 0}function de(e,t){if(!H())return;let n=I.get(e);n||(n=new Map,I.set(e,n));let r=n.get(t);r||(r=new Set,n.set(t,r)),j(r)}function j(e){e.has(v)||(e.add(v),v.deps.push(e))}function he(e,t){const n=I.get(e);if(!n)throw new Error(`not found ${e}`);const r=n.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);F(r)}function F(e){for(const t of e)t.scheduler?t.scheduler():t.run()}function _e(e,t){const n=new D(e,t==null?void 0:t.scheduler);m(n,t),n.run();const r=n.run.bind(n);return r.effect=n,r}const Ee=L(),Te=$(),me=L(!0),Re=$(!0),ve=L(!0,!0);function L(e=!1,t=!1){return function(r,f){let l=Reflect.get(r,f);return f===S.IS_REACTIVE?!e:f===S.IS_READONLY?e:(t||(R(l)&&(l=e?U(l):g(l)),e||de(r,f)),l)}}function $(e=!1){return function(n,r,f){if(e)return console.warn(`${r} is readonly, target can not be set, ${n}`),!0;const l=Reflect.set(n,r,f);return he(n,r),l}}const ye={get:Ee,set:Te},Y={get:me,set:Re},Ne=m({},Y,{get:ve});var S=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(S||{});function g(e){return O(e,ye)}function U(e){return O(e,Y)}function X(e){return!!e.__v_isReactive__}function z(e){return!!e.__v_isReadonly__}function Ae(e){return X(e)||z(e)}function G(e){return O(e,Ne)}function O(e,t){return R(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}class Ce{constructor(t){E(this,"_value");E(this,"_rawValue");E(this,"deps");E(this,"_v_isRef",!0);this._rawValue=t,this._value=x(t),this.deps=new Set}get value(){return be(this),this._value}set value(t){ee(t,this._rawValue)&&(this._rawValue=t,this._value=x(t),F(this.deps))}}function x(e){return R(e)?g(e):e}function be(e){H()&&j(e.deps)}function Ie(e){return new Ce(e)}function N(e){return!!e._v_isRef}function V(e){return N(e)?e.value:e}function q(e){return new Proxy(e,{get(t,n){return V(Reflect.get(t,n))},set(t,n,r){return N(t[n])&&!N(r)?t[n].value=r:Reflect.set(t,n,r)}})}function Le(e,t){const n={isMounted:!1,vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[],slots:{},provides:t?t.provides:{},parent:t,subTree:null};return n.emit=ue.bind(null,n),n}function Se(e){_(e,e.vnode.props),fe(e,e.vnode.children),ge(e)}function ge(e){const t=e.type,{setup:n}=t;if(n){J(e);const r=n(G(e.props),{emit:e.emit});J(null),Oe(e,r)}e.proxy=new Proxy({_:e},ie)}function Oe(e,t){typeof t=="object"&&(e.setupState=q(t)),we(e)}function we(e){const t=e.type;t.render&&(e.render=t.render)}let B=null;function w(){return B}function J(e){B=e}const K=Symbol("Fragment"),W=Symbol("Text");function y(e,t,n){const r={type:e,props:t,children:n,el:null,shapeFlag:Pe(e)};return typeof n=="string"?r.shapeFlag|=d.TEXT_CHILDREN:Array.isArray(n)?r.shapeFlag|=d.ARRAY_CHILDREN:r.shapeFlag&d.STATEFUL_COMPONENT&&R(r.children)&&(r.shapeFlag|=d.SLOT_CHILDREN),r}function Me(e){return y(W,{},e)}function Pe(e){return typeof e=="string"?d.ELEMENT:d.STATEFUL_COMPONENT}function Z(e){return function(n){return{mount(r){const f=y(n);let l;typeof r=="string"?l=document.querySelector(r):l=r,r||te(`can not find element ${r} on document`),e(f,l)}}}}function De(e,t,n){return y(e,t,n)}function He(e,t,n){const r=e[t];if(r&&typeof r=="function")return y(K,{},r(n))}function je(e,t){var r;const n=w();if(n){let{provides:f}=n;const l=(r=n.parent)==null?void 0:r.provides;l===f&&(f=n.provides=Object.create(l)),f[e]=t}}function Fe(e,t){var r;const n=w();if(n){const f=(r=n.parent)==null?void 0:r.provides;if(f){if(e in f)return f[e];if(t)return typeof t=="function"?t():t}}}function Q(e){const{createElement:t,patchProp:n,insert:r,remove:f,setElementText:l}=e;function Je(o,s){A(null,o,s,null)}const A=(o,s,i,c)=>{const{shapeFlag:a,type:h}=s;switch(h){case K:We(o,s,i,c);break;case W:Ke(o,s,i);break;default:a&d.ELEMENT?et(o,s,i,c):a&d.STATEFUL_COMPONENT&&nt(o,s,i,c);break}},Ke=(o,s,i)=>{const{children:c}=s,a=s.el=document.createTextNode(c);i.append(a)},We=(o,s,i,c)=>{M(s.children,i,c)};function Ze(o,s,i){if(s!==i){for(const c in i){const a=s[c],h=i[c];a!==h&&n(o,c,a,h)}if(s!==C)for(const c in s)c in i||n(o,c,s[c],null)}}function Qe(o,s,i,c){const{shapeFlag:a,children:h}=o,{shapeFlag:p,children:T}=s;p&d.TEXT_CHILDREN?(a&d.ARRAY_CHILDREN&&k(o.children),h!==T&&l(i,T)):(a&d.TEXT_CHILDREN?l(i,""):k(T),M(T,i,c))}function k(o){for(const s of o){const i=s.el;f(i)}}function ke(o,s,i,c){const a=o.props||C,h=s.props||C,p=s.el=o.el;Qe(o,s,p,c),Ze(p,a,h)}function et(o,s,i,c){o?ke(o,s,i,c):tt(s,i,c)}function tt(o,s,i){const{children:c,props:a,shapeFlag:h}=o,p=t(o.type);o.el=p,c&&(h&d.TEXT_CHILDREN?p.textContent=c:h&d.ARRAY_CHILDREN&&M(o.children,p,i));for(const T in a){const st=a[T];n(p,T,null,st)}r(p,s)}function M(o,s,i){o.forEach(c=>{A(null,c,s,i)})}function nt(o,s,i,c){rt(s,i,c)}function rt(o,s,i){const c=Le(o,i);Se(c),ot(c,o,s)}function ot(o,s,i){_e(()=>{var c,a;if(o.isMounted){const{proxy:h}=o,p=o.subTree,T=(a=o.render)==null?void 0:a.call(h);o.subTree=T||null,T&&A(p,T,i,o),s.el=T.el,o.isMounted=!0}else{const{proxy:h}=o;o.subTree=((c=o.render)==null?void 0:c.call(h))||null;const p=o.subTree;p&&A(null,p,i,o),s.el=p.el,o.isMounted=!0}})}return{createApp:Z(Je)}}function $e(e){return document.createElement(e)}function Ye(e,t,n,r){if(ne(t)){const f=t.slice(2).toLowerCase();e.addEventListener(f,r)}else r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Ue(e,t){t.appendChild(e)}function Xe(e){const t=e.parentNode;t&&t.removeChild(e)}function ze(e,t){e.textContent=t}const Ge=Q({createElement:$e,patchProp:Ye,insert:Ue,remove:Xe,setElementText:ze});function xe(e){return Ge.createApp(e)}class Ve{constructor(t){E(this,"_getter");E(this,"_isDirty",!0);E(this,"_value");E(this,"_effect");this._getter=t,this._effect=new D(t,()=>{this._isDirty||(this._isDirty=!0)})}get value(){return this._isDirty&&(this._isDirty=!1,this._value=this._effect.run()),this._value}}function qe(e){return new Ve(e)}function Be(e,t){return e+t}u.add=Be,u.computed=qe,u.createApp=xe,u.createAppAPI=Z,u.createRender=Q,u.createTextNode=Me,u.createVNode=y,u.getCurrentInstance=w,u.h=De,u.inject=Fe,u.isProxy=Ae,u.isReactive=X,u.isReadonly=z,u.isRef=N,u.provide=je,u.proxyRefs=q,u.reactive=g,u.readonly=U,u.ref=Ie,u.renderSlots=He,u.shallowReadonly=G,u.unRef=V,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
