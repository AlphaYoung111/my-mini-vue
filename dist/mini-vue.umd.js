(function(u,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(u=typeof globalThis!="undefined"?globalThis:u||self,i(u.MiniVue={}))})(this,function(u){"use strict";function i(e,t){e.props=t||{}}const N=Object.assign,d=e=>typeof e=="object"&&e!==null,C=e=>{throw new Error(e)},h=e=>/^on[A-Z]/.test(e),m=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y=e=>e.charAt(0).toUpperCase()+e.slice(1),L=e=>e.split("-").map(t=>y(t)).join(""),b=e=>e?`on${L(e)}`:"",O={$el:e=>e.vnode.el},w={get({_:e},t){const{setupState:n,props:o}=e;if(m(n,t))return n[t];if(m(o,t))return o[t];const c=O[t];if(c)return c(e)}};function I(e,t,...n){console.log("emit",t);const{props:o}=e,c=b(t),r=o[c];r&&r(...n)}const H=new WeakMap;function M(e,t,n){const o=H.get(e);if(!o)throw new Error(`not found ${e}`);const c=o.get(t);if(!c)throw new Error(`not found ${t} in ${e}`);g(c)}function g(e){for(const t of e)t.scheduler?t.scheduler():t.run()}const S=l(),P=T(),j=l(!0),D=T(!0),v=l(!0,!0);function l(e=!1,t=!1){return function(o,c){let r=Reflect.get(o,c);return c===p.IS_REACTIVE?!e:c===p.IS_READONLY?e:(t||d(r)&&(r=e?U(r):Y(r)),r)}}function T(e=!1){return function(n,o,c){if(e)return console.warn(`${o} is readonly, target can not be set, ${n}`),!0;const r=Reflect.set(n,o,c);return M(n,o),r}}const $={get:S,set:P},_={get:j,set:D},x=N({},_,{get:v});var p=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(p||{});function Y(e){return a(e,$)}function U(e){return a(e,_)}function G(e){return a(e,x)}function a(e,t){return d(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}function X(e){const t={vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[]};return t.emit=I.bind(null,t),t}function F(e){i(e,e.vnode.props),V(e)}function V(e){const t=e.type,{setup:n}=t;if(n){const o=n(G(e.props),{emit:e.emit});z(e,o)}e.proxy=new Proxy({_:e},w)}function z(e,t){typeof t=="object"&&(e.setupState=t),q(e)}function q(e){const t=e.type;t.render&&(e.render=t.render)}var s=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e))(s||{});function W(e,t){E(e,t)}function E(e,t){const{shapeFlag:n}=e;n&s.ELEMENT?Z(e,t):n&s.STATEFUL_COMPONENT&&K(e,t)}function Z(e,t){B(e,t)}function B(e,t){const{children:n,props:o,shapeFlag:c}=e,r=document.createElement(e.type);e.el=r,n&&(c&s.TEXT_CHILDREN?r.textContent=n:c&s.ARRAY_CHILDREN&&J(e,r));for(const f in o){const A=o[f];if(h(f)){const oe=f.slice(2).toLowerCase();r.addEventListener(oe,A)}else r.setAttribute(f,A)}t.appendChild(r)}function J(e,t){e.children.forEach(n=>{E(n,t)})}function K(e,t){Q(e,t)}function Q(e,t){const n=X(e);F(n),k(n,e,t)}function k(e,t,n){var r;const{proxy:o}=e,c=(r=e.render)==null?void 0:r.call(o);c&&E(c,n),t.el=c.el}function R(e,t,n){const o={type:e,props:t,children:n,el:null,shapeFlag:ee(e)};return typeof n=="string"?o.shapeFlag|=s.TEXT_CHILDREN:Array.isArray(n)&&(o.shapeFlag|=s.ARRAY_CHILDREN),o}function ee(e){return typeof e=="string"?s.ELEMENT:s.STATEFUL_COMPONENT}function te(e){return{mount(t){const n=R(e);let o;typeof t=="string"?o=document.querySelector(t):o=t,t||C(`can not find element ${t} on document`),W(n,o)}}}function ne(e,t,n){return R(e,t,n)}u.createApp=te,u.h=ne,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
