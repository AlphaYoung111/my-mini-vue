var Je=Object.defineProperty;var Qe=(o,a,_)=>a in o?Je(o,a,{enumerable:!0,configurable:!0,writable:!0,value:_}):o[a]=_;var p=(o,a,_)=>(Qe(o,typeof a!="symbol"?a+"":a,_),_);(function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis!="undefined"?globalThis:o||self,a(o.MiniVue={}))})(this,function(o){"use strict";function a(e,t){e.props=t||{}}const _=Object.assign,R=e=>typeof e=="object"&&e!==null,J=(e,t)=>!Object.is(e,t),Q=e=>{throw new Error(e)},k=e=>/^on[A-Z]/.test(e),b=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ee=e=>e.charAt(0).toUpperCase()+e.slice(1),te=e=>e.split("-").map(t=>ee(t)).join(""),ne=e=>e?`on${te(e)}`:"",re={$el:e=>e.vnode.el,$slots:e=>e.slots},oe={get({_:e},t){const{setupState:n,props:r}=e;if(b(n,t))return n[t];if(b(r,t))return r[t];const s=re[t];if(s)return s(e)}};function ce(e,t,...n){const{props:r}=e,s=ne(t),i=r[s];i&&i(...n)}var d=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e[e.SLOT_CHILDREN=16]="SLOT_CHILDREN",e))(d||{});function se(e,t){e.vnode.shapeFlag&d.SLOT_CHILDREN&&ie(t,e.slots)}function ie(e,t){if(R(e))for(const n in e){const r=e[n];t[n]=s=>ue(r(s))}}function ue(e){return Array.isArray(e)?e:[e]}let m,N;class O{constructor(t,n){p(this,"_fn");p(this,"deps",[]);p(this,"active",!0);p(this,"onStop");this.scheduler=n,this._fn=t}run(){if(!this.active)return this._fn();m=this,N=!0;const t=this._fn();return N=!1,t}stop(){this.active&&(this.onStop&&this.onStop(),fe(this),this.active=!1)}}function fe(e){e.deps.forEach(t=>{t.delete(e)}),e.deps.length=0}const A=new WeakMap;function g(){return N&&m!==void 0}function le(e,t){if(!g())return;let n=A.get(e);n||(n=new Map,A.set(e,n));let r=n.get(t);r||(r=new Set,n.set(t,r)),P(r)}function P(e){e.has(m)||(e.add(m),m.deps.push(e))}function ae(e,t){const n=A.get(e);if(!n)throw new Error(`not found ${e}`);const r=n.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);M(r)}function M(e){for(const t of e)t.scheduler?t.scheduler():t.run()}function pe(e,t){const n=new O(e,t==null?void 0:t.scheduler);_(n,t),n.run();const r=n.run.bind(n);return r.effect=n,r}const de=C(),_e=D(),he=C(!0),Ee=D(!0),Re=C(!0,!0);function C(e=!1,t=!1){return function(r,s){let i=Reflect.get(r,s);return s===I.IS_REACTIVE?!e:s===I.IS_READONLY?e:(t||(R(i)&&(i=e?j(i):w(i)),e||le(r,s)),i)}}function D(e=!1){return function(n,r,s){if(e)return console.warn(`${r} is readonly, target can not be set, ${n}`),!0;const i=Reflect.set(n,r,s);return ae(n,r),i}}const me={get:de,set:_e},H={get:he,set:Ee},Te=_({},H,{get:Re});var I=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(I||{});function w(e){return L(e,me)}function j(e){return L(e,H)}function $(e){return!!e.__v_isReactive__}function F(e){return!!e.__v_isReadonly__}function ve(e){return $(e)||F(e)}function U(e){return L(e,Te)}function L(e,t){return R(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}class ye{constructor(t){p(this,"_value");p(this,"_rawValue");p(this,"deps");p(this,"_v_isRef",!0);this._rawValue=t,this._value=Y(t),this.deps=new Set}get value(){return Ne(this),this._value}set value(t){J(t,this._rawValue)&&(this._rawValue=t,this._value=Y(t),M(this.deps))}}function Y(e){return R(e)?w(e):e}function Ne(e){g()&&P(e.deps)}function Ae(e){return new ye(e)}function y(e){return!!e._v_isRef}function V(e){return y(e)?e.value:e}function z(e){return new Proxy(e,{get(t,n){return V(Reflect.get(t,n))},set(t,n,r){return y(t[n])&&!y(r)?t[n].value=r:Reflect.set(t,n,r)}})}function Ce(e,t){const n={isMounted:!1,vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[],slots:{},provides:t?t.provides:{},parent:t};return n.emit=ce.bind(null,n),n}function Ie(e){a(e,e.vnode.props),se(e,e.vnode.children),we(e)}function we(e){const t=e.type,{setup:n}=t;if(n){X(e);const r=n(U(e.props),{emit:e.emit});X(null),Le(e,r)}e.proxy=new Proxy({_:e},oe)}function Le(e,t){typeof t=="object"&&(e.setupState=z(t)),Se(e)}function Se(e){const t=e.type;t.render&&(e.render=t.render)}let G=null;function S(){return G}function X(e){G=e}const q=Symbol("Fragment"),B=Symbol("Text");function T(e,t,n){const r={type:e,props:t,children:n,el:null,shapeFlag:Oe(e)};return typeof n=="string"?r.shapeFlag|=d.TEXT_CHILDREN:Array.isArray(n)?r.shapeFlag|=d.ARRAY_CHILDREN:r.shapeFlag&d.STATEFUL_COMPONENT&&R(r.children)&&(r.shapeFlag|=d.SLOT_CHILDREN),r}function be(e){return T(B,{},e)}function Oe(e){return typeof e=="string"?d.ELEMENT:d.STATEFUL_COMPONENT}function K(e){return function(n){return{mount(r){const s=T(n);let i;typeof r=="string"?i=document.querySelector(r):i=r,r||Q(`can not find element ${r} on document`),e(s,i)}}}}function ge(e,t,n){return T(e,t,n)}function Pe(e,t,n){const r=e[t];if(r&&typeof r=="function")return T(q,{},r(n))}function Me(e,t){var r;const n=S();if(n){let{provides:s}=n;const i=(r=n.parent)==null?void 0:r.provides;i===s&&(s=n.provides=Object.create(i)),s[e]=t}}function De(e,t){var r;const n=S();if(n){const s=(r=n.parent)==null?void 0:r.provides;if(s){if(e in s)return s[e];if(t)return typeof t=="function"?t():t}}}function W(e){const{createElement:t,patchProp:n,insert:r}=e;function s(c,u){i(c,u,null)}function i(c,u,f){const{shapeFlag:l,type:h}=c;switch(h){case q:Xe(c,u,f);break;case B:Ge(c,u);break;default:l&d.ELEMENT?qe(c,u,f):l&d.STATEFUL_COMPONENT&&Ke(c,u,f);break}}function Ge(c,u){const{children:f}=c,l=c.el=document.createTextNode(f);u.append(l)}function Xe(c,u,f){Z(c,u,f)}function qe(c,u,f){Be(c,u,f)}function Be(c,u,f){const{children:l,props:h,shapeFlag:E}=c,v=t(c.type);c.el=v,l&&(E&d.TEXT_CHILDREN?v.textContent=l:E&d.ARRAY_CHILDREN&&Z(c,v,f));for(const x in h){const xe=h[x];n(v,x,xe)}r(v,u)}function Z(c,u,f){c.children.forEach(l=>{i(l,u,f)})}function Ke(c,u,f){We(c,u,f)}function We(c,u,f){const l=Ce(c,f);Ie(l),Ze(l,c,u)}function Ze(c,u,f){pe(()=>{var l;if(c.isMounted)console.log("\u66F4\u65B0");else{const{proxy:h}=c,E=(l=c.render)==null?void 0:l.call(h);E&&i(E,f,c),u.el=E.el,c.isMounted=!0}})}return{createApp:K(s)}}function He(e){return document.createElement(e)}function je(e,t,n){if(k(t)){const r=t.slice(2).toLowerCase();e.addEventListener(r,n)}else e.setAttribute(t,n)}function $e(e,t){t.appendChild(e)}const Fe=W({createElement:He,patchProp:je,insert:$e});function Ue(e){return Fe.createApp(e)}class Ye{constructor(t){p(this,"_getter");p(this,"_isDirty",!0);p(this,"_value");p(this,"_effect");this._getter=t,this._effect=new O(t,()=>{this._isDirty||(this._isDirty=!0)})}get value(){return this._isDirty&&(this._isDirty=!1,this._value=this._effect.run()),this._value}}function Ve(e){return new Ye(e)}function ze(e,t){return e+t}o.add=ze,o.computed=Ve,o.createApp=Ue,o.createAppAPI=K,o.createRender=W,o.createTextNode=be,o.createVNode=T,o.getCurrentInstance=S,o.h=ge,o.inject=De,o.isProxy=ve,o.isReactive=$,o.isReadonly=F,o.isRef=y,o.provide=Me,o.proxyRefs=z,o.reactive=w,o.readonly=j,o.ref=Ae,o.renderSlots=Pe,o.shallowReadonly=U,o.unRef=V,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
