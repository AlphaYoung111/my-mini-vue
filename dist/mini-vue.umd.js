var Be=Object.defineProperty;var Je=(o,a,h)=>a in o?Be(o,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):o[a]=h;var p=(o,a,h)=>(Je(o,typeof a!="symbol"?a+"":a,h),h);(function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(o=typeof globalThis!="undefined"?globalThis:o||self,a(o.MiniVue={}))})(this,function(o){"use strict";function a(e,t){e.props=t||{}}const h=Object.assign,E=e=>typeof e=="object"&&e!==null,Z=(e,t)=>!Object.is(e,t),B=e=>{throw new Error(e)},J=e=>/^on[A-Z]/.test(e),w=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Q=e=>e.charAt(0).toUpperCase()+e.slice(1),x=e=>e.split("-").map(t=>Q(t)).join(""),k=e=>e?`on${x(e)}`:"",ee={$el:e=>e.vnode.el,$slots:e=>e.slots},te={get({_:e},t){const{setupState:n,props:r}=e;if(w(n,t))return n[t];if(w(r,t))return r[t];const s=ee[t];if(s)return s(e)}};function ne(e,t,...n){const{props:r}=e,s=k(t),c=r[s];c&&c(...n)}var d=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e[e.SLOT_CHILDREN=16]="SLOT_CHILDREN",e))(d||{});function re(e,t){e.vnode.shapeFlag&d.SLOT_CHILDREN&&oe(t,e.slots)}function oe(e,t){if(E(e))for(const n in e){const r=e[n];t[n]=s=>ie(r(s))}}function ie(e){return Array.isArray(e)?e:[e]}let m,y;class se{constructor(t,n){p(this,"_fn");p(this,"deps",[]);p(this,"active",!0);p(this,"onStop");this.scheduler=n,this._fn=t}run(){if(!this.active)return this._fn();m=this,y=!0;const t=this._fn();return y=!1,t}stop(){this.active&&(this.onStop&&this.onStop(),ce(this),this.active=!1)}}function ce(e){e.deps.forEach(t=>{t.delete(e)}),e.deps.length=0}const N=new WeakMap;function O(){return y&&m!==void 0}function ue(e,t){if(!O())return;let n=N.get(e);n||(n=new Map,N.set(e,n));let r=n.get(t);r||(r=new Set,n.set(t,r)),b(r)}function b(e){e.has(m)||(e.add(m),m.deps.push(e))}function fe(e,t){const n=N.get(e);if(!n)throw new Error(`not found ${e}`);const r=n.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);g(r)}function g(e){for(const t of e)t.scheduler?t.scheduler():t.run()}const le=A(),ae=P(),pe=A(!0),de=P(!0),_e=A(!0,!0);function A(e=!1,t=!1){return function(r,s){let c=Reflect.get(r,s);return s===C.IS_REACTIVE?!e:s===C.IS_READONLY?e:(t||(E(c)&&(c=e?H(c):I(c)),e||ue(r,s)),c)}}function P(e=!1){return function(n,r,s){if(e)return console.warn(`${r} is readonly, target can not be set, ${n}`),!0;const c=Reflect.set(n,r,s);return fe(n,r),c}}const he={get:le,set:ae},D={get:pe,set:de},Ee=h({},D,{get:_e});var C=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(C||{});function I(e){return L(e,he)}function H(e){return L(e,D)}function M(e){return!!e.__v_isReactive__}function j(e){return!!e.__v_isReadonly__}function me(e){return M(e)||j(e)}function $(e){return L(e,Ee)}function L(e,t){return E(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}function Re(e,t){const n={vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[],slots:{},provides:t?t.provides:{},parent:t};return n.emit=ne.bind(null,n),n}function Te(e){a(e,e.vnode.props),re(e,e.vnode.children),ve(e)}function ve(e){const t=e.type,{setup:n}=t;if(n){U(e);const r=n($(e.props),{emit:e.emit});U(null),ye(e,r)}e.proxy=new Proxy({_:e},te)}function ye(e,t){typeof t=="object"&&(e.setupState=t),Ne(e)}function Ne(e){const t=e.type;t.render&&(e.render=t.render)}let F=null;function S(){return F}function U(e){F=e}const Y=Symbol("Fragment"),V=Symbol("Text");function R(e,t,n){const r={type:e,props:t,children:n,el:null,shapeFlag:Ce(e)};return typeof n=="string"?r.shapeFlag|=d.TEXT_CHILDREN:Array.isArray(n)?r.shapeFlag|=d.ARRAY_CHILDREN:r.shapeFlag&d.STATEFUL_COMPONENT&&E(r.children)&&(r.shapeFlag|=d.SLOT_CHILDREN),r}function Ae(e){return R(V,{},e)}function Ce(e){return typeof e=="string"?d.ELEMENT:d.STATEFUL_COMPONENT}function z(e){return function(n){return{mount(r){const s=R(n);let c;typeof r=="string"?c=document.querySelector(r):c=r,r||B(`can not find element ${r} on document`),e(s,c)}}}}function Ie(e,t,n){return R(e,t,n)}function Le(e,t,n){const r=e[t];if(r&&typeof r=="function")return R(Y,{},r(n))}function Se(e,t){var r;const n=S();if(n){let{provides:s}=n;const c=(r=n.parent)==null?void 0:r.provides;c===s&&(s=n.provides=Object.create(c)),s[e]=t}}function we(e,t){var r;const n=S();if(n){const s=(r=n.parent)==null?void 0:r.provides;if(s){if(e in s)return s[e];if(t)return typeof t=="function"?t():t}}}function G(e){const{createElement:t,patchProp:n,insert:r}=e;function s(i,u){c(i,u,null)}function c(i,u,f){const{shapeFlag:l,type:_}=i;switch(_){case Y:ze(i,u,f);break;case V:Ve(i,u);break;default:l&d.ELEMENT?Ge(i,u,f):l&d.STATEFUL_COMPONENT&&qe(i,u,f);break}}function Ve(i,u){const{children:f}=i,l=i.el=document.createTextNode(f);u.append(l)}function ze(i,u,f){K(i,u,f)}function Ge(i,u,f){Xe(i,u,f)}function Xe(i,u,f){const{children:l,props:_,shapeFlag:T}=i,v=t(i.type);i.el=v,l&&(T&d.TEXT_CHILDREN?v.textContent=l:T&d.ARRAY_CHILDREN&&K(i,v,f));for(const W in _){const Ze=_[W];n(v,W,Ze)}r(v,u)}function K(i,u,f){i.children.forEach(l=>{c(l,u,f)})}function qe(i,u,f){Ke(i,u,f)}function Ke(i,u,f){const l=Re(i,f);Te(l),We(l,i,u)}function We(i,u,f){var T;const{proxy:l}=i,_=(T=i.render)==null?void 0:T.call(l);_&&c(_,f,i),u.el=_.el}return{createApp:z(s)}}function Oe(e){return document.createElement(e)}function be(e,t,n){if(J(t)){const r=t.slice(2).toLowerCase();e.addEventListener(r,n)}else e.setAttribute(t,n)}function ge(e,t){t.appendChild(e)}const Pe=G({createElement:Oe,patchProp:be,insert:ge});function De(e){return Pe.createApp(e)}class He{constructor(t){p(this,"_value");p(this,"_rawValue");p(this,"deps");p(this,"_v_isRef",!0);this._rawValue=t,this._value=X(t),this.deps=new Set}get value(){return Me(this),this._value}set value(t){Z(t,this._rawValue)&&(this._rawValue=t,this._value=X(t),g(this.deps))}}function X(e){return E(e)?I(e):e}function Me(e){O()&&b(e.deps)}function je(e){return new He(e)}function q(e){return!!e._v_isRef}function $e(e){return q(e)?e.value:e}class Fe{constructor(t){p(this,"_getter");p(this,"_isDirty",!0);p(this,"_value");p(this,"_effect");this._getter=t,this._effect=new se(t,()=>{this._isDirty||(this._isDirty=!0)})}get value(){return this._isDirty&&(this._isDirty=!1,this._value=this._effect.run()),this._value}}function Ue(e){return new Fe(e)}function Ye(e,t){return e+t}o.add=Ye,o.computed=Ue,o.createApp=De,o.createAppAPI=z,o.createRender=G,o.createTextNode=Ae,o.createVNode=R,o.getCurrentInstance=S,o.h=Ie,o.inject=we,o.isProxy=me,o.isReactive=M,o.isReadonly=j,o.isRef=q,o.provide=Se,o.reactive=I,o.readonly=H,o.ref=je,o.renderSlots=Le,o.shallowReadonly=$,o.unRef=$e,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
