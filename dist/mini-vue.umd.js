var lt=Object.defineProperty;var dt=(f,T,v)=>T in f?lt(f,T,{enumerable:!0,configurable:!0,writable:!0,value:v}):f[T]=v;var R=(f,T,v)=>(dt(f,typeof T!="symbol"?T+"":T,v),v);(function(f,T){typeof exports=="object"&&typeof module!="undefined"?T(exports):typeof define=="function"&&define.amd?define(["exports"],T):(f=typeof globalThis!="undefined"?globalThis:f||self,T(f.MiniVue={}))})(this,function(f){"use strict";function T(e,t){e.props=t||{}}const v=Object.assign,b=e=>typeof e=="object"&&e!==null,re=(e,t)=>!Object.is(e,t),oe=e=>{throw new Error(e)},se=e=>/^on[A-Z]/.test(e),j=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ie=e=>e.charAt(0).toUpperCase()+e.slice(1),ce=e=>e.split("-").map(t=>ie(t)).join(""),ue=e=>e?`on${ce(e)}`:"",L={},fe={$el:e=>e.vnode.el,$slots:e=>e.slots},le={get({_:e},t){const{setupState:n,props:r}=e;if(j(n,t))return n[t];if(j(r,t))return r[t];const d=fe[t];if(d)return d(e)}};function de(e,t,...n){const{props:r}=e,d=ue(t),p=r[d];p&&p(...n)}var E=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e[e.SLOT_CHILDREN=16]="SLOT_CHILDREN",e))(E||{});function ae(e,t){e.vnode.shapeFlag&E.SLOT_CHILDREN&&pe(t,e.slots)}function pe(e,t){if(b(e))for(const n in e){const r=e[n];t[n]=d=>he(r(d))}}function he(e){return Array.isArray(e)?e:[e]}let A,S;class F{constructor(t,n){R(this,"_fn");R(this,"deps",[]);R(this,"active",!0);R(this,"onStop");this.scheduler=n,this._fn=t}run(){if(!this.active)return this._fn();A=this,S=!0;const t=this._fn();return S=!1,t}stop(){this.active&&(this.onStop&&this.onStop(),_e(this),this.active=!1)}}function _e(e){e.deps.forEach(t=>{t.delete(e)}),e.deps.length=0}const g=new WeakMap;function $(){return S&&A!==void 0}function Ee(e,t){if(!$())return;let n=g.get(e);n||(n=new Map,g.set(e,n));let r=n.get(t);r||(r=new Set,n.set(t,r)),Y(r)}function Y(e){e.has(A)||(e.add(A),A.deps.push(e))}function Te(e,t){const n=g.get(e);if(!n)throw new Error(`not found ${e}`);const r=n.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);U(r)}function U(e){for(const t of e)t.scheduler?t.scheduler():t.run()}function Re(e,t){const n=new F(e,t==null?void 0:t.scheduler);v(n,t),n.run();const r=n.run.bind(n);return r.effect=n,r}const me=w(),ve=X(),ye=w(!0),Ne=X(!0),be=w(!0,!0);function w(e=!1,t=!1){return function(r,d){let p=Reflect.get(r,d);return d===O.IS_REACTIVE?!e:d===O.IS_READONLY?e:(t||(b(p)&&(p=e?z(p):P(p)),e||Ee(r,d)),p)}}function X(e=!1){return function(n,r,d){if(e)return console.warn(`${r} is readonly, target can not be set, ${n}`),!0;const p=Reflect.set(n,r,d);return Te(n,r),p}}const Ae={get:me,set:ve},x={get:ye,set:Ne},Ce=v({},x,{get:be});var O=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(O||{});function P(e){return M(e,Ae)}function z(e){return M(e,x)}function G(e){return!!e.__v_isReactive__}function V(e){return!!e.__v_isReadonly__}function Ie(e){return G(e)||V(e)}function k(e){return M(e,Ce)}function M(e,t){return b(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}class Le{constructor(t){R(this,"_value");R(this,"_rawValue");R(this,"deps");R(this,"_v_isRef",!0);this._rawValue=t,this._value=B(t),this.deps=new Set}get value(){return Se(this),this._value}set value(t){re(t,this._rawValue)&&(this._rawValue=t,this._value=B(t),U(this.deps))}}function B(e){return b(e)?P(e):e}function Se(e){$()&&Y(e.deps)}function ge(e){return new Le(e)}function I(e){return!!e._v_isRef}function K(e){return I(e)?e.value:e}function q(e){return new Proxy(e,{get(t,n){return K(Reflect.get(t,n))},set(t,n,r){return I(t[n])&&!I(r)?t[n].value=r:Reflect.set(t,n,r)}})}function we(e,t){const n={isMounted:!1,vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[],slots:{},provides:t?t.provides:{},parent:t,subTree:null};return n.emit=de.bind(null,n),n}function Oe(e){T(e,e.vnode.props),ae(e,e.vnode.children),Pe(e)}function Pe(e){const t=e.type,{setup:n}=t;if(n){W(e);const r=n(k(e.props),{emit:e.emit});W(null),Me(e,r)}e.proxy=new Proxy({_:e},le)}function Me(e,t){typeof t=="object"&&(e.setupState=q(t)),De(e)}function De(e){const t=e.type;t.render&&(e.render=t.render)}let J=null;function D(){return J}function W(e){J=e}const Z=Symbol("Fragment"),Q=Symbol("Text");function C(e,t,n){const r={type:e,props:t,children:n,el:null,shapeFlag:je(e),key:t&&t.key};return typeof n=="string"?r.shapeFlag|=E.TEXT_CHILDREN:Array.isArray(n)?r.shapeFlag|=E.ARRAY_CHILDREN:r.shapeFlag&E.STATEFUL_COMPONENT&&b(r.children)&&(r.shapeFlag|=E.SLOT_CHILDREN),r}function He(e){return C(Q,{},e)}function je(e){return typeof e=="string"?E.ELEMENT:E.STATEFUL_COMPONENT}function ee(e){return function(n){return{mount(r){const d=C(n);let p;typeof r=="string"?p=document.querySelector(r):p=r,r||oe(`can not find element ${r} on document`),e(d,p)}}}}function Fe(e,t,n){return C(e,t,n)}function $e(e,t,n){const r=e[t];if(r&&typeof r=="function")return C(Z,{},r(n))}function Ye(e,t){var r;const n=D();if(n){let{provides:d}=n;const p=(r=n.parent)==null?void 0:r.provides;p===d&&(d=n.provides=Object.create(p)),d[e]=t}}function Ue(e,t){var r;const n=D();if(n){const d=(r=n.parent)==null?void 0:r.provides;if(d){if(e in d)return d[e];if(t)return typeof t=="function"?t():t}}}function te(e){const{createElement:t,patchProp:n,insert:r,remove:d,setElementText:p}=e;function We(o,s){y(null,o,s,null,null)}const y=(o,s,i,c,u)=>{const{shapeFlag:_,type:l}=s;switch(l){case Z:Qe(o,s,i,c,u);break;case Q:Ze(o,s,i);break;default:_&E.ELEMENT?st(o,s,i,c,u):_&E.STATEFUL_COMPONENT&&ct(o,s,i,c,u);break}},Ze=(o,s,i)=>{const{children:c}=s,u=s.el=document.createTextNode(c);i.append(u)},Qe=(o,s,i,c,u)=>{H(s.children,i,c,u)};function et(o,s,i){if(s!==i){for(const c in i){const u=s[c],_=i[c];u!==_&&n(o,c,u,_)}if(s!==L)for(const c in s)c in i||n(o,c,s[c],null)}}function tt(o,s,i,c,u){const{shapeFlag:_,children:l}=o,{shapeFlag:a,children:h}=s;a&E.TEXT_CHILDREN?(_&E.ARRAY_CHILDREN&&rt(o.children),l!==h&&p(i,h)):_&E.TEXT_CHILDREN?(p(i,""),H(h,i,c,u)):nt(l,h,i,c,u)}function nt(o,s,i,c,u){const _=s.length;let l=0,a=o.length-1,h=_-1;for(;l<=a&&l<=h;){const m=o[l],N=s[l];if(ne(m,N))y(m,N,i,c,u);else break;l++}for(;l<=a&&l<=h;){const m=o[a],N=s[h];if(ne(m,N))y(m,N,i,c,u);else break;a--,h--}if(l>a){if(l<=h){const m=h+1,N=m<_?s[m].el:null;for(;l<=h;)y(null,s[l],i,c,N),l++}}else if(l>h)for(;l<=a;)d(o[l].el),l++;console.log(l)}function ne(o,s){return o.type===s.type&&o.key===s.key}function rt(o){for(const s of o){const i=s.el;d(i)}}function ot(o,s,i,c,u){const _=o.props||L,l=s.props||L,a=s.el=o.el;tt(o,s,a,c,u),et(a,_,l)}function st(o,s,i,c,u){o?ot(o,s,i,c,u):it(s,i,c,u)}function it(o,s,i,c){const{children:u,props:_,shapeFlag:l}=o,a=t(o.type);o.el=a,u&&(l&E.TEXT_CHILDREN?a.textContent=u:l&E.ARRAY_CHILDREN&&H(o.children,a,i,c));for(const h in _){const m=_[h];n(a,h,null,m)}r(a,s,c)}function H(o,s,i,c){o.forEach(u=>{y(null,u,s,i,c)})}function ct(o,s,i,c,u){ut(s,i,c,u)}function ut(o,s,i,c){const u=we(o,i);Oe(u),ft(u,o,s,c)}function ft(o,s,i,c){Re(()=>{var u,_;if(o.isMounted){const{proxy:l}=o,a=o.subTree,h=(_=o.render)==null?void 0:_.call(l);o.subTree=h||null,h&&y(a,h,i,o,c),s.el=h.el,o.isMounted=!0}else{const{proxy:l}=o;o.subTree=((u=o.render)==null?void 0:u.call(l))||null;const a=o.subTree;a&&y(null,a,i,o,c),s.el=a.el,o.isMounted=!0}})}return{createApp:ee(We)}}function Xe(e){return document.createElement(e)}function xe(e,t,n,r){if(se(t)){const d=t.slice(2).toLowerCase();e.addEventListener(d,r)}else r==null?e.removeAttribute(t):e.setAttribute(t,r)}function ze(e,t,n){t.insertBefore(e,n||null)}function Ge(e){const t=e.parentNode;t&&t.removeChild(e)}function Ve(e,t){e.textContent=t}const ke=te({createElement:Xe,patchProp:xe,insert:ze,remove:Ge,setElementText:Ve});function Be(e){return ke.createApp(e)}class Ke{constructor(t){R(this,"_getter");R(this,"_isDirty",!0);R(this,"_value");R(this,"_effect");this._getter=t,this._effect=new F(t,()=>{this._isDirty||(this._isDirty=!0)})}get value(){return this._isDirty&&(this._isDirty=!1,this._value=this._effect.run()),this._value}}function qe(e){return new Ke(e)}function Je(e,t){return e+t}f.add=Je,f.computed=qe,f.createApp=Be,f.createAppAPI=ee,f.createRender=te,f.createTextNode=He,f.createVNode=C,f.getCurrentInstance=D,f.h=Fe,f.inject=Ue,f.isProxy=Ie,f.isReactive=G,f.isReadonly=V,f.isRef=I,f.provide=Ye,f.proxyRefs=q,f.reactive=P,f.readonly=z,f.ref=ge,f.renderSlots=$e,f.shallowReadonly=k,f.unRef=K,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
