(function(u,f){typeof exports=="object"&&typeof module!="undefined"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(u=typeof globalThis!="undefined"?globalThis:u||self,f(u.MiniVue={}))})(this,function(u){"use strict";function f(e,t){e.props=t||{}}const N=Object.assign,a=e=>typeof e=="object"&&e!==null,y=e=>{throw new Error(e)},C=e=>/^on[A-Z]/.test(e),T=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),h={$el:e=>e.vnode.el},L={get({_:e},t){const{setupState:n,props:o}=e;if(T(n,t))return n[t];if(T(o,t))return o[t];const r=h[t];if(r)return r(e)}},O=new WeakMap;function b(e,t,n){const o=O.get(e);if(!o)throw new Error(`not found ${e}`);const r=o.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);w(r)}function w(e){for(const t of e)t.scheduler?t.scheduler():t.run()}const I=l(),M=_(),g=l(!0),S=_(!0),H=l(!0,!0);function l(e=!1,t=!1){return function(o,r){let c=Reflect.get(o,r);return r===p.IS_REACTIVE?!e:r===p.IS_READONLY?e:(t||a(c)&&(c=e?v(c):j(c)),c)}}function _(e=!1){return function(n,o,r){if(e)return console.warn(`${o} is readonly, target can not be set, ${n}`),!0;const c=Reflect.set(n,o,r);return b(n,o),c}}const P={get:I,set:M},m={get:g,set:S},D=N({},m,{get:H});var p=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(p||{});function j(e){return E(e,P)}function v(e){return E(e,m)}function x(e){return E(e,D)}function E(e,t){return a(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}function $(e){return{vnode:e,type:e.type,setupState:{},props:{}}}function Y(e){f(e,e.vnode.props),G(e)}function G(e){const t=e.type,{setup:n}=t;if(n){const o=n(x(e.props));U(e,o)}e.proxy=new Proxy({_:e},L)}function U(e,t){typeof t=="object"&&(e.setupState=t),X(e)}function X(e){const t=e.type;t.render&&(e.render=t.render)}var s=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e))(s||{});function F(e,t){d(e,t)}function d(e,t){const{shapeFlag:n}=e;n&s.ELEMENT?V(e,t):n&s.STATEFUL_COMPONENT&&Z(e,t)}function V(e,t){q(e,t)}function q(e,t){const{children:n,props:o,shapeFlag:r}=e,c=document.createElement(e.type);e.el=c,n&&(r&s.TEXT_CHILDREN?c.textContent=n:r&s.ARRAY_CHILDREN&&W(e,c));for(const i in o){const A=o[i];if(C(i)){const k=i.slice(2).toLowerCase();c.addEventListener(k,A)}else c.setAttribute(i,A)}t.appendChild(c)}function W(e,t){e.children.forEach(n=>{d(n,t)})}function Z(e,t){z(e,t)}function z(e,t){const n=$(e);Y(n),B(n,e,t)}function B(e,t,n){var c;const{proxy:o}=e,r=(c=e.render)==null?void 0:c.call(o);r&&d(r,n),t.el=r.el}function R(e,t,n){const o={type:e,props:t,children:n,el:null,shapeFlag:J(e)};return typeof n=="string"?o.shapeFlag|=s.TEXT_CHILDREN:Array.isArray(n)&&(o.shapeFlag|=s.ARRAY_CHILDREN),o}function J(e){return typeof e=="string"?s.ELEMENT:s.STATEFUL_COMPONENT}function K(e){return{mount(t){const n=R(e);let o;typeof t=="string"?o=document.querySelector(t):o=t,t||y(`can not find element ${t} on document`),F(n,o)}}}function Q(e,t,n){return R(e,t,n)}u.createApp=K,u.h=Q,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
