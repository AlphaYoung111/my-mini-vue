(function(u,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(u=typeof globalThis!="undefined"?globalThis:u||self,i(u.MiniVue={}))})(this,function(u){"use strict";function i(e,t){e.props=t||{}}const C=Object.assign,l=e=>typeof e=="object"&&e!==null,O=e=>{throw new Error(e)},b=e=>/^on[A-Z]/.test(e),T=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),h=e=>e.charAt(0).toUpperCase()+e.slice(1),S=e=>e.split("-").map(t=>h(t)).join(""),I=e=>e?`on${S(e)}`:"",H={$el:e=>e.vnode.el,$slots:e=>e.slots},w={get({_:e},t){const{setupState:n,props:o}=e;if(T(n,t))return n[t];if(T(o,t))return o[t];const r=H[t];if(r)return r(e)}};function g(e,t,...n){const{props:o}=e,r=I(t),s=o[r];s&&s(...n)}var c=(e=>(e[e.ELEMENT=1]="ELEMENT",e[e.STATEFUL_COMPONENT=2]="STATEFUL_COMPONENT",e[e.TEXT_CHILDREN=4]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=8]="ARRAY_CHILDREN",e[e.SLOT_CHILDREN=16]="SLOT_CHILDREN",e))(c||{});function M(e,t){e.vnode.shapeFlag&c.SLOT_CHILDREN&&D(t,e.slots)}function D(e,t){if(l(e))for(const n in e){const o=e[n];t[n]=r=>P(o(r))}}function P(e){return Array.isArray(e)?e:[e]}const x=new WeakMap;function j(e,t,n){const o=x.get(e);if(!o)throw new Error(`not found ${e}`);const r=o.get(t);if(!r)throw new Error(`not found ${t} in ${e}`);$(r)}function $(e){for(const t of e)t.scheduler?t.scheduler():t.run()}const v=a(),F=N(),U=a(!0),Y=N(!0),V=a(!0,!0);function a(e=!1,t=!1){return function(o,r){let s=Reflect.get(o,r);return r===d.IS_REACTIVE?!e:r===d.IS_READONLY?e:(t||l(s)&&(s=e?q(s):X(s)),s)}}function N(e=!1){return function(n,o,r){if(e)return console.warn(`${o} is readonly, target can not be set, ${n}`),!0;const s=Reflect.set(n,o,r);return j(n,o),s}}const z={get:v,set:F},_={get:U,set:Y},G=C({},_,{get:V});var d=(e=>(e.IS_REACTIVE="__v_isReactive__",e.IS_READONLY="__v_isReadonly__",e))(d||{});function X(e){return E(e,z)}function q(e){return E(e,_)}function K(e){return E(e,G)}function E(e,t){return l(e)?new Proxy(e,t):(console.warn(`target ${e} is not a object`),e)}function W(e){const t={vnode:e,type:e.type,setupState:{},props:{},emit:()=>{},emits:[],slots:{}};return t.emit=g.bind(null,t),t}function Z(e){i(e,e.vnode.props),M(e,e.vnode.children),B(e)}function B(e){const t=e.type,{setup:n}=t;if(n){const o=n(K(e.props),{emit:e.emit});J(e,o)}e.proxy=new Proxy({_:e},w)}function J(e,t){typeof t=="object"&&(e.setupState=t),Q(e)}function Q(e){const t=e.type;t.render&&(e.render=t.render)}const R=Symbol("Fragment"),y=Symbol("Text");function f(e,t,n){const o={type:e,props:t,children:n,el:null,shapeFlag:ee(e)};return typeof n=="string"?o.shapeFlag|=c.TEXT_CHILDREN:Array.isArray(n)?o.shapeFlag|=c.ARRAY_CHILDREN:o.shapeFlag&c.STATEFUL_COMPONENT&&l(o.children)&&(o.shapeFlag|=c.SLOT_CHILDREN),o}function k(e){return f(y,{},e)}function ee(e){return typeof e=="string"?c.ELEMENT:c.STATEFUL_COMPONENT}function te(e,t){m(e,t)}function m(e,t){const{shapeFlag:n,type:o}=e;switch(o){case R:oe(e,t);break;case y:ne(e,t);break;default:n&c.ELEMENT?re(e,t):n&c.STATEFUL_COMPONENT&&ce(e,t);break}}function ne(e,t){const{children:n}=e,o=e.el=document.createTextNode(n);t.append(o)}function oe(e,t){L(e,t)}function re(e,t){se(e,t)}function se(e,t){const{children:n,props:o,shapeFlag:r}=e,s=document.createElement(e.type);e.el=s,n&&(r&c.TEXT_CHILDREN?s.textContent=n:r&c.ARRAY_CHILDREN&&L(e,s));for(const p in o){const A=o[p];if(b(p)){const ae=p.slice(2).toLowerCase();s.addEventListener(ae,A)}else s.setAttribute(p,A)}t.appendChild(s)}function L(e,t){e.children.forEach(n=>{m(n,t)})}function ce(e,t){ue(e,t)}function ue(e,t){const n=W(e);Z(n),ie(n,e,t)}function ie(e,t,n){var s;const{proxy:o}=e,r=(s=e.render)==null?void 0:s.call(o);r&&m(r,n),t.el=r.el}function fe(e){return{mount(t){const n=f(e);let o;typeof t=="string"?o=document.querySelector(t):o=t,t||O(`can not find element ${t} on document`),te(n,o)}}}function le(e,t,n){return f(e,t,n)}function pe(e,t,n){const o=e[t];if(o&&typeof o=="function")return f(R,{},o(n))}u.createApp=fe,u.createTextNode=k,u.createVNode=f,u.h=le,u.renderSlots=pe,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
